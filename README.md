# TranslatePress 激活工具

这是一个基于Node.js和Puppeteer的工具，用于自动访问网站上的所有页面，以激活TranslatePress插件的翻译功能。

## 背景

TranslatePress 插件通常需要在页面被访问时才会激活翻译。它是一种前端翻译插件，通过在页面加载时动态翻译内容来工作。当用户访问网站页面时，TranslatePress 会根据设置的语言和翻译规则，将页面内容实时翻译并显示。

这个工具可以模拟用户访问，遍历网站的所有页面，从而激活TranslatePress对所有页面内容的翻译。

## 功能

- 支持解析sitemap.xml和sitemap_index.xml
- 自动递归处理sitemap索引中的所有子地图
- 实时显示处理进度
- 显示已访问的URL列表
- 使用Puppeteer模拟真实浏览器访问
- 强大的防反爬虫功能，避免被目标网站屏蔽

## 防反爬虫措施

为了避免被网站检测和屏蔽，工具采取了以下措施：

1. **随机延迟** - 页面间访问添加随机时间间隔
2. **模拟人类行为** - 模拟滚动、暂停等真实用户行为
3. **真实User-Agent** - 使用常见浏览器的User-Agent
4. **合理请求头** - 设置合理的HTTP请求头
5. **单线程访问** - 默认单线程访问，避免频繁请求
6. **随机视口大小** - 每次访问使用不同的浏览器窗口大小

所有这些参数都可以通过配置页面进行自定义调整。

## 安装

1. 确保已安装Node.js（版本14.0.0或更高）
2. 克隆此仓库
3. 安装依赖：

```bash
npm install
```

## 使用方法

1. 启动服务：

```bash
npm start
```

2. 在浏览器中访问：http://localhost:3000
3. 输入网站的sitemap.xml或sitemap_index.xml URL
4. 可选：调整防爬虫设置
5. 点击"开始处理"按钮
6. 在进度页面查看处理状态

## 高级配置

工具提供了多种配置选项来调整访问行为：

- **页面间延迟** - 控制页面间的访问时间间隔
- **页面加载等待时间** - 等待页面完全加载和TranslatePress初始化的时间
- **模拟人类行为** - 启用/禁用模拟真实用户行为
- **最大并发数** - 控制同时处理的URL数量
- **User-Agent** - 自定义浏览器标识

访问 `/config` 路径或点击首页的"高级配置"按钮可以访问完整的配置选项。

## 部署到Vercel

此项目可以轻松部署到Vercel上：

1. Fork此仓库到自己的GitHub账户
2. 在Vercel中导入该项目
3. 点击部署即可

## 注意事项

- 处理大型网站时可能需要较长时间
- 某些网站可能限制爬虫访问，可能需要调整访问间隔
- 在生产环境中使用时，建议添加访问限速和认证机制
- 使用过程中请遵守网站的robots.txt规则和使用条款

## 许可证

MIT 